<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>页面镂空效果 | SHU SHU</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/logo.PNG">
    <meta name="description" content="书书de个人网站">
    
    <link rel="preload" href="/assets/css/0.styles.e2ae7eca.css" as="style"><link rel="preload" href="/assets/js/app.e1d64058.js" as="script"><link rel="preload" href="/assets/js/2.e3efbe2e.js" as="script"><link rel="preload" href="/assets/js/3.c3eaf577.js" as="script"><link rel="prefetch" href="/assets/js/10.166fb143.js"><link rel="prefetch" href="/assets/js/11.64c1e7d0.js"><link rel="prefetch" href="/assets/js/12.56db2e79.js"><link rel="prefetch" href="/assets/js/13.0e5d0c5e.js"><link rel="prefetch" href="/assets/js/14.02ebda88.js"><link rel="prefetch" href="/assets/js/15.51eceed7.js"><link rel="prefetch" href="/assets/js/16.d9a6d626.js"><link rel="prefetch" href="/assets/js/17.429ae27e.js"><link rel="prefetch" href="/assets/js/18.564179ef.js"><link rel="prefetch" href="/assets/js/19.9059b3da.js"><link rel="prefetch" href="/assets/js/20.99a919a3.js"><link rel="prefetch" href="/assets/js/21.ff770fef.js"><link rel="prefetch" href="/assets/js/22.500d923b.js"><link rel="prefetch" href="/assets/js/4.d44673c6.js"><link rel="prefetch" href="/assets/js/5.8a0a7db2.js"><link rel="prefetch" href="/assets/js/6.e7675a4e.js"><link rel="prefetch" href="/assets/js/7.ac71a505.js"><link rel="prefetch" href="/assets/js/8.3cfe042c.js"><link rel="prefetch" href="/assets/js/9.88a68303.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e2ae7eca.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.JPG" alt="SHU SHU" class="logo"> <span class="site-name can-hide">SHU SHU</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/java-script/" class="nav-link">
  javaScript
</a></div><div class="nav-item"><a href="/css/" class="nav-link router-link-active">
  CSS
</a></div><div class="nav-item"><a href="/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/other/" class="nav-link">
  杂七杂八
</a></div><div class="nav-item"><a href="/tricky/" class="nav-link">
  疑难杂症
</a></div><div class="nav-item"><a href="https://www.jianshu.com/u/35a394141c39" target="_blank" rel="noopener noreferrer" class="nav-link external">
  简书地址
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/java-script/" class="nav-link">
  javaScript
</a></div><div class="nav-item"><a href="/css/" class="nav-link router-link-active">
  CSS
</a></div><div class="nav-item"><a href="/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/other/" class="nav-link">
  杂七杂八
</a></div><div class="nav-item"><a href="/tricky/" class="nav-link">
  疑难杂症
</a></div><div class="nav-item"><a href="https://www.jianshu.com/u/35a394141c39" target="_blank" rel="noopener noreferrer" class="nav-link external">
  简书地址
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>目录一</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/css/纯CSS3实现3D透视效果.html" class="sidebar-link">纯CSS3实现3D透视效果</a></li><li><a href="/css/页面镂空效果.html" class="active sidebar-link">页面镂空效果</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/css/页面镂空效果.html#简单图形使用css镂空" class="sidebar-link">简单图形使用css镂空</a></li><li class="sidebar-sub-header"><a href="/css/页面镂空效果.html#复杂不规则图形使用canvas镂空" class="sidebar-link">复杂不规则图形使用canvas镂空</a></li><li class="sidebar-sub-header"><a href="/css/页面镂空效果.html#使用svg镂空" class="sidebar-link">使用svg镂空</a></li><li class="sidebar-sub-header"><a href="/css/页面镂空效果.html#总结" class="sidebar-link">总结</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="页面镂空效果"><a href="#页面镂空效果" class="header-anchor">#</a> 页面镂空效果</h1> <h2 id="简单图形使用css镂空"><a href="#简单图形使用css镂空" class="header-anchor">#</a> 简单图形使用css镂空</h2> <p>在前端应用中, 不管是PC端, 还是移动端. 总有很多时候需要对用户进行引导.</p> <p>一般, 我们会在我们的应用页面之上覆盖一层黑色蒙层, 然后进行引导.引导的内容有如何操作页面功能呢, 引导用户如何操作.而进行引导的这个时候, 我们页面上其他功能是不可以使用的.
这样子的场景相信开发移动端的同学们是最熟悉的, PC端的应用场景就相对较少了.</p> <p>而我发现, 很多同学会直接把连带黑色蒙层的背景一起切成一张图, 直接甩在页面上, 或者把主要的图切出来.
这样子, 固然可以得到一样的效果.
然而却不是最优方案, 同时大张的图片也会增加性能消耗、网络延迟.
本文就带大家来学会如何在前端页面优雅的打洞.</p> <p>我们先来看几张我做的镂空效果.</p> <p><img src="/assets/img/3D_1.b8286f64.png" alt="3D透视1"></p> <p>第一种方法, 使用CSS进行镂空.</p> <p>那么在css中如何镂空页面呢?</p> <p>有同学会想了, 使用4个黑色透明的div拼合, 中间就可以得到一个矩形的镂空.</p> <p>那么问题来了, 我要镂空圆形, 椭圆, 圆角矩形呢?又该如何去实现呢?</p> <p>在css中有两个属性:</p> <ul><li><code>border</code></li> <li><code>box-shadow</code></li></ul> <p><code>border</code>是给节点盒子添加边框, <code>box-shadow</code>是为节点盒子添加阴影.</p> <p>那么, 这两个属性就促使我们有了实现镂空的基础.</p> <p>当边框或者阴影较大的时候, 就可以达到镂空的效果了</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cricle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* 镂空一个圆 */</span>
<span class="token selector">.cricle</span><span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>-50%<span class="token punctuation">)</span> <span class="token function">translateY</span><span class="token punctuation">(</span>-50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 1000px solid <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0.8<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/* box-shadow: 0 0 0 1000px rgba(0,0,0,0.8); */</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样子, 我们的页面就有了一个镂空的圆.</p> <p><img src="/assets/img/3D_2.fb62604d.png" alt="3D透视2"></p> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>使用<code>border-radius</code>来控制div形状.</p></div> <p>问题又来了, 这样子我们只是镂空了一个, 如果我们需要页面上镂空多个呢?</p> <p>这个时候我们就需要变通一下, 在每一个镂空节点之上在套一个div盒子, 然后把每个盒子拼合在页面上.</p> <div class="language-html extra-class"><pre class="language-html"><code> <span class="token comment">&lt;!-- 镂空两个 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mask-con-1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>round-rect<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mask-con-2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cricle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.mask-con-1</span><span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.round-rect</span><span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>-56.8%<span class="token punctuation">)</span> <span class="token function">translateY</span><span class="token punctuation">(</span>-56.8%<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 180px<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 1000px solid <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0.8<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 1020px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.mask-con-2</span><span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.mask-con-2 .cricle</span><span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>-50%<span class="token punctuation">)</span> <span class="token function">translateY</span><span class="token punctuation">(</span>-51%<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 1000px solid <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0.8<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样子我们就得到了下图中的镂空效果:</p> <p><img src="/assets/img/3D_3.29c528a6.png" alt="3D透视3"></p> <p>是不是很有意思, 这样子我们就不需要每次遇到引导就去切图覆盖了.</p> <p>然而我们需要注意一下的点:</p> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p><code>box-shadow</code>具有一定兼容性, 建议使用<code>border</code>.
同时设置<code>border</code>和<code>border-radius</code>时, 圆角会被覆盖, 所以我们设置的时候<code>border-radius</code>在<code>border</code>的基础上加上圆角范围.</p></div> <p>我们可以来看下<code>border</code>和<code>border-radius</code>的相爱相杀.</p> <p><img src="/assets/img/3D_4.b8c87703.gif" alt="3D透视4"></p> <p>可以看到, 随着border的增大, 内层的圆角慢慢就消失了.</p> <p>所以我们要设置内层镂空圆角, 就需要在<code>border</code>的基础值上增加.</p> <p>css镂空也有很多局限, 比如镂空不规则图形就相形见绌</p> <p>我们还有canvas的方法来镂空.</p> <h2 id="复杂不规则图形使用canvas镂空"><a href="#复杂不规则图形使用canvas镂空" class="header-anchor">#</a> 复杂不规则图形使用canvas镂空</h2> <p>canvas绘制形状的方法, 也可以用来做镂空.</p> <p>具体如何去做呢?</p> <p>这个就是canvas做镂空的核心所在了.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>canvas<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>在canvas上绘制.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;canvas&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">960</span><span class="token punctuation">;</span>
canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">540</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&quot;2d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>我们先来画一个镂空的矩形试下:</p> <p>顺时针画一个大背景, 逆时针画一个矩形</p> <div class="language-js extra-class"><pre class="language-js"><code>ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'rgba(0,0,0,0.8)'</span><span class="token punctuation">;</span>

<span class="token comment">//顺时针话方</span>
ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">960</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">960</span><span class="token punctuation">,</span> <span class="token number">540</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">540</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//逆时针镂空</span>
<span class="token comment">//方块</span>
ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这样子, 我们就得到了镂空的一个矩形框了.</p> <p><img src="/assets/img/3D_5.7db6e145.png" alt="3D透视5"></p> <p>同样的, 我们再来画一个圆:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 圆</span>
ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">700</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">700</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>接着, 我们更换笔触, 画出一些不规则形状:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 三角</span>
ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">240</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//类椭圆</span>
ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">140</span><span class="token punctuation">,</span> <span class="token number">267</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">quadraticCurveTo</span><span class="token punctuation">(</span><span class="token number">117</span><span class="token punctuation">,</span> <span class="token number">252</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">336</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">quadraticCurveTo</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">423</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">438</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">quadraticCurveTo</span><span class="token punctuation">(</span><span class="token number">63</span><span class="token punctuation">,</span> <span class="token number">453</span><span class="token punctuation">,</span> <span class="token number">114</span><span class="token punctuation">,</span> <span class="token number">367</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">quadraticCurveTo</span><span class="token punctuation">(</span><span class="token number">166</span><span class="token punctuation">,</span> <span class="token number">280</span><span class="token punctuation">,</span> <span class="token number">140</span><span class="token punctuation">,</span> <span class="token number">267</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//不规则</span>
ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">197</span><span class="token punctuation">,</span><span class="token number">320</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">210</span><span class="token punctuation">,</span> <span class="token number">342</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">215</span><span class="token punctuation">,</span> <span class="token number">370</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">268</span><span class="token punctuation">,</span> <span class="token number">360</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">226</span><span class="token punctuation">,</span> <span class="token number">535</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">251</span><span class="token punctuation">,</span> <span class="token number">539</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">323</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">263</span><span class="token punctuation">,</span> <span class="token number">326</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">235</span><span class="token punctuation">,</span> <span class="token number">302</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">236</span><span class="token punctuation">,</span> <span class="token number">303</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">213</span><span class="token punctuation">,</span> <span class="token number">317</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>就得到了下面的镂空效果:</p> <p><img src="/assets/img/3D_6.1443d594.png" alt="3D透视6"></p> <p>难点应该是那个倾斜的椭圆了</p> <p>我们用ps画出如下的效果图, 然后得到一系列的点, 将这些点写入二次贝赛尔曲线, 就可以顺利画出来了</p> <p><img src="/assets/img/3D_7.7cf4cdf9.png" alt="3D透视7"></p> <p>这也是一个小技巧.</p> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>镂空的图形一定要逆着背景去画.
当然, 镂空矩形还可以使用clearRect的方法</p></div> <p>很多游戏引擎里面有个遮罩的概念</p> <p>很多同学就会用遮罩去做镂空, 其实不可取哈, 遮罩性能较差.</p> <p>但是不可否认, 遮罩是可以根据图片去镂空一块区域的. 功能还是非常香的.</p> <h2 id="使用svg镂空"><a href="#使用svg镂空" class="header-anchor">#</a> 使用svg镂空</h2> <p>最后再来介绍一下svg的镂空方法.</p> <p>这个镂空不是很常见, svg兼容也不是很好.</p> <p>看下我写的例子:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- svg镂空 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>960<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>540<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>defs</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mask</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mask<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rect</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>rect1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">x</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100%<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100%<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>circle</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mask-to<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>565<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>67<span class="token punctuation">&quot;</span></span> <span class="token attr-name">r</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>50<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>circle</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mask-to<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>434<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>320<span class="token punctuation">&quot;</span></span> <span class="token attr-name">r</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>circle</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mask-to<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>462<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>209<span class="token punctuation">&quot;</span></span> <span class="token attr-name">r</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>40<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ellipse</span> <span class="token attr-name">cx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>141<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>135<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>50<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ry</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rect</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mask-to<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span> <span class="token attr-name">x</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>824<span class="token punctuation">'</span></span> <span class="token attr-name">y</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>142<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mask</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>defs</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rect</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>rect-bg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">x</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100%<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100%<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.svg</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.rect1</span> <span class="token punctuation">{</span>
    <span class="token property">stroke</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span> 
    <span class="token property">fill</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.rect2</span> <span class="token punctuation">{</span>
    <span class="token property">stroke</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
    <span class="token property">fill</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">mask</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>#mask3<span class="token punctuation">)</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.mask-to</span><span class="token punctuation">{</span>
    <span class="token property">fill</span><span class="token punctuation">:</span> #000
<span class="token punctuation">}</span>

<span class="token selector">.rect-bg</span><span class="token punctuation">{</span>
    <span class="token property">stroke</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span> <span class="token property">fill</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.7<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token property">mask</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>#mask<span class="token punctuation">)</span></span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样子也可以得到如下的镂空效果:</p> <p><img src="/assets/img/3D_8.b4c4c39f.png" alt="3D透视8"></p> <p>使用svg镂空可以画的图形也是不多.</p> <p>同时需要注意的是, svg蒙层和背景需要形成对比.所以我这里选择的是黑白两色.</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>至此, 三种镂空的方法就介绍到这里了, 大家还有更好的办法吗?</p> <p>我们需要注意:</p> <div class="custom-block tip"><p class="custom-block-title">使用</p> <ul><li>如果页面镂空很单纯, 就使用css镂空.</li> <li>如果涉及到不规则图形, 就使用canvas.</li> <li>一般游戏中就使用canvas的方法好了.</li> <li>尽量不去使用svg方法(不用管浏览器, 还是很强大的).</li></ul></div> <p>尽量少去请求图片资源, 优化性能是我们需要做的, 不能什么页面都靠图片堆砌.</p> <p>如果你还有更好的方式, 可以留下你的评论, 感激不尽~</p> <p>欢迎大家拍砖指正, 笔者功力尚浅, 如有不当之处请斧正.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/css/纯CSS3实现3D透视效果.html" class="prev">
        纯CSS3实现3D透视效果
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.e1d64058.js" defer></script><script src="/assets/js/2.e3efbe2e.js" defer></script><script src="/assets/js/3.c3eaf577.js" defer></script>
  </body>
</html>
